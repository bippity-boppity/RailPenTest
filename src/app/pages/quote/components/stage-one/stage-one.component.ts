import { Component, Output, EventEmitter, Input } from '@angular/core';
import { FormBuilder, FormGroup, Validators } from '@angular/forms';

@Component({
  selector: 'app-stage-one',
  templateUrl: './stage-one.component.html',
  styleUrls: ['./stage-one.component.scss']
})
export class StageOneComponent {
  @Input() name: string = "";
  @Input() email: string = "";
  @Input() number: string = "";
  @Input() company: string = "";
  @Output() formSubmitted = new EventEmitter<void>();
  form: FormGroup;

  constructor(private fb: FormBuilder) {
    this.form = this.fb.group({
      name: ['', [Validators.required]],
      email: ['', [Validators.required, Validators.email]],
      number: [''],
      company: [''],
    });
  }

  ngOnInit() {
    this.form.patchValue({
      name: this.name,
      email: this.email,
      number: this.number,
      company: this.company,
    });
  }

  submitForm() {
    this.formSubmitted.emit();
  }
}